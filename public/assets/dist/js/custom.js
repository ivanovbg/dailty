$( document ).ready(function() {    $("#add_staff_form").submit(function(e) {         e.preventDefault();         var email = $("#add_staff_email").val();         var username = $("#add_staff_username").val();        $.post("/ajax/check_account_data", {email: email, username: username}, function(response) {            if(response.status){                e.currentTarget.submit();            }else{                $(".add_staff_error").show();                $(".add_staff_error_msg").html(response.msg);            }        }, 'json');    });    var confirm_delete_elements = $(".confirm_delete");    if(confirm_delete_elements.length>0){        $.each(confirm_delete_elements, function(key, value) {            $(this).attr('data-toggle', 'modal');            $(this).attr('data-target', '#deleteConfirm');            $(this).attr('data-placement', 'top');        });    }});$(".company_select").on("change", function(){   var company_id =  $(this).find(":selected").val();    $.post("/ajax/company_select", {company_id: company_id}, function (response) {        window.location.href = window.location.href;        console.log(123);    }, 'json');});$('input[type="checkbox"].minimal, input[type="radio"].minimal').iCheck({    checkboxClass: 'icheckbox_minimal-blue',    radioClass   : 'iradio_minimal-blue'})//delete modal and confirm$(".confirm_delete").off().on("click", function(){    var delete_url = $(this).data('url');    delete_url = url + delete_url;    $(".confirm_delete_btn").off().on("click", function(){        window.location.href = delete_url;    });});$('#addproviders').multiselect({        nonSelectedText: 'Изберете служители'});$(".js-add-service-providers").off().on("click", function(){    var accounts = [];    var service = $(this).data("service");    var selected = $('#addproviders option:selected');    $(selected).each(function(index, brand){        accounts.push($(this).val());    });    if(accounts.length>0) {        $.post("/ajax/add_service_providers", {service: service, accounts: accounts, account: account, company:company}, function (response) {            if(response.status){                $('.addProviders').modal('toggle');                window.location.href = window.location.href;            }        });    }});$(".js-delete").off().on("click", function(){   var item = $(this).parents(".item");   var id   = item.data('id');   var url = $(this).data("url");   var modal = $("#deleteConfirm");   var modal_body = modal.find(".modal-body");   modal.modal("show");    $(".confirm_delete_btn").off().on("click", function(){       var default_text = modal_body.html();      $.post(url, {id:id}, function(response){          if(response.status){              modal_body.html(returnResponseMessage(response.msg, "success"));              setTimeout(                  function(){                      $("#deleteConfirm").modal("hide");                      modal_body.html(default_text);                      item.remove();                  }, 3000);          }else{            modal_body.html(returnResponseMessage(response.msg, "error"));          }      }, 'json');   });});function returnResponseMessage(text, type = "success"){    if(type == "error"){        var html = "<div class=\"alert alert-danger alert-dismissable\">\n" +            "                    <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-hidden=\"true\">×</button>\n" +            "                    <h4><i class=\"icon fa fa-ban\"></i> Грешка!</h4>\n" +                                    text +            "                  </div>";    }else{       var html = "<div class=\"alert alert-success alert-dismissable\">\n" +           "                    <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-hidden=\"true\">×</button>\n" +           "                    <h4>\t<i class=\"icon fa fa-check\"></i> Успешно!</h4>\n" +                                text +           "                  </div>";    }    return html;}$(".js-add-note").off().on("click", function(){   var modal = $("#addNote");   var modal_title = modal.find(".modal-title");   var modal_body = modal.find(".modal-body");   var title = modal_body.find("input[name=title]")   var content = modal_body.find("textarea[name=content]");   var id = $(this).data("id") != undefined ? $(this).data("id") : 0;   id ? modal_title.html("Редактиране на бележка") : modal_title.html("Добавяне на бележка");   title.parent("div").removeClass("has-error");   content.parent("div").removeClass("has-error");   title.val("");   content.val("");   if(id){       $.post("/ajax/get_note", { id: id }, function(response){           if(response){               title.val(response.note.title);               content.val(response.note.content);           }       }, 'json');   }   modal.modal("show");    $(".js-save-note").off().on("click", function(){        title.parent("div").removeClass("has-error");        content.parent("div").removeClass("has-error");        if(!validateNoteForm(title, content)){            $.post("/ajax/add_note", { title : title.val(), content: content.val(), id: id }, function(response){                if(response.status){                    modal.modal("hide");                    window.location.href = window.location.href;                }            }, 'json');        }    });});function validateNoteForm(title, content){    var error = false;    if(!title.val() || !content.val()){        if(!title.val()){            title.parent("div").addClass("has-error");        }        if(!content.val()){            content.parent("div").addClass("has-error");        }        error = true;    }    return error;}$(".js-view-note").off().on("click", function(){    var id = $(this).data("id");    var modal = $("#viewNote");    var modal_title = modal.find(".modal-title");    var modal_body = modal.find(".modal-body");    modal.modal("show");    $.post("/ajax/get_note", { id: id }, function(response){        if(response){            modal_title.html(response.note.title);            modal_body.html(response.note.content);        }    }, 'json');});